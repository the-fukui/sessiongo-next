// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

generator typegraphql {
  provider                 = "typegraphql-prisma"
  output                   = "../generated/type-graphql"
  useUncheckedScalarInputs = true
}

model sessions {
  id         Int                     @id @default(autoincrement())
  slug       String                  @unique @default(uuid())
  created_at DateTime                @default(now())
  updated_at DateTime                @updatedAt
  started_at DateTime                @default(now())
  ended_at   DateTime?
  status     status                  @default(DRAFT)
  title      String                  @db.VarChar(255)
  author     users                   @relation(fields: [author_id], references: [id])
  author_id  Int
  content    String                  @db.Text
  tags       sessions_session_tags[]
}

model users {
  id       Int        @id @default(autoincrement())
  email    String     @unique
  name     String?
  sessions sessions[]
}

enum status {
  DRAFT
  PUBLISHED
}

model session_tags {
  id         Int                     @id @default(autoincrement())
  slug       String                  @unique @default(uuid())
  created_at DateTime                @default(now())
  updated_at DateTime                @updatedAt
  label      String                  @db.VarChar(255)
  sessions   sessions_session_tags[]
}

model sessions_session_tags {
  session    sessions     @relation(fields: [session_id], references: [id])
  session_id Int
  tag        session_tags @relation(fields: [tag_id], references: [id])
  tag_id     Int

  @@id([session_id, tag_id])
  @@unique([session_id, tag_id])
}
